<!DOCTYPE html>
<html>
<head>
    <title>Orinoco</title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="css/styles.css">
    <meta name="description" content="Trouver la caméra qu'il vous faut sur Oriview">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" crossorigin="anonymous">
    <script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
    <script src="index.js"></script>
    <script src="JWDP5-master/app.js"></script>
    <script src="JWDP5-master/serveur.js"></script>
    <script src="JWDP5-master/package.json.js"></script>
    <script src="JWDP5-master/models/camera.js"></script>
    <script src="JWDP5-master/controllers/camera.js"></script>
    <script src="JWDP5-master/routes/camera.js"></script>
</head>

<body class="produit">

<header>
    <a href="index.html">
        <img class="titre" src="img/oriview.png">
    </a>
    <div class="cart">
        <a class="logopanier" href="panier.html">
            <i class="fas fa-shopping-cart fa-2x"></i>
        </a>
        <div class="pp">
            <h3 class="tit">
                Mon Panier
            </h3>
            <!-- Liste des Articles dans le panier -->
            <ul id="show-cart">
                <li></li>
            </ul>
            <div>Vous avez <span id="count-cart">X</span> Article(s) dans votre panier</div>
            <div>Total : € <span id="total-cart"></span></div>
        </div>
    </div>
</header>


<div id="blockproduit">
    <div class="blocktop">
        <div class="topleft">
           <img src="images/vcam_2.jpg">
       </div>
        <div class="topright">
            <h1 class="tit">
                Camera Anex 1800
            </h1>
            <div class="prix1">
                111.89 €
            </div>
            <p>
                La FED 3 a été crée en 1967, c'est le premier reflex numerique. Il connait un succet fou dans les années 70' après que sa promotion dans une pub avec Mickael Jordan.
            </p>
        </div>
    </div>
    <div class="blockbottom">
        <div class="bottomleft">
            <div class="inputs">
                <input type="number" id="quantity2" name="quantity2" min="1" max="99" value="1">
                <select id="lentille2" name="lentille2" onclick="deleteE('message2')">
                    <option value="lentille" disabled selected>
                        Lentille
                    </option>
                    <option class="rouge" value="Rouge">    
                        Rouge
                    </option>
                    <option class="bleue" value="Bleue">
                        Bleue
                    </option>
                    <option class="vert" value="Verte">
                        Verte
                    </option>
                    <option  class="blanc" value="Blanche">
                        Blanche
                    </option>
                    <option class="noir" value="Noire">
                        Noire
                    </option>
                </select>
            </div>
        </div>
        <div class="bottomright">
            <a class="add-to-cart addprod" href="#" data-name="Camera Anex 1800" data-price="111.89">
                Ajouter au panier
            </a>
        </div>
        <p id="message2"></p>
    </div>
</div>

<script>
$(".add-to-cart").click(function(event){
            event.preventDefault();
            var name = $(this).attr("data-name");
            var price = Number($(this).attr("data-price"));

            shoppingCart.addItemToCart(name, price, 1);
            displayCart();
        });

        $("#clear-cart").click(function(event){
            shoppingCart.clearCart();
            displayCart();
        });

        function displayCart() {
            var cartArray = shoppingCart.listCart();
            console.log(cartArray);
            var output = "";

            for (var i in cartArray) {
                output += "<li>"
                    +cartArray[i].name
                    +" <input class='item-count' type='number' data-name='"
                    +cartArray[i].name
                    +"' value='"+cartArray[i].count+"' >"
                    +" x "+cartArray[i].price
                    +" = "+cartArray[i].total
                    +" <button class='plus-item' data-name='"
                    +cartArray[i].name+"'>+</button>"
                    +" <button class='subtract-item' data-name='"
                    +cartArray[i].name+"'>-</button>"
                    +" <button class='delete-item' data-name='"
                    +cartArray[i].name+"'>X</button>"
                    +"</li>";
            }

            $("#show-cart").html(output);
            $("#count-cart").html( shoppingCart.countCart() );
            $("#total-cart").html( shoppingCart.totalCart() );
        }

        $("#show-cart").on("click", ".delete-item", function(event){
            var name = $(this).attr("data-name");
            shoppingCart.removeItemFromCartAll(name);
            displayCart();
        });

        $("#show-cart").on("click", ".subtract-item", function(event){
            var name = $(this).attr("data-name");
            shoppingCart.removeItemFromCart(name);
            displayCart();
        });

        $("#show-cart").on("click", ".plus-item", function(event){
            var name = $(this).attr("data-name");
            shoppingCart.addItemToCart(name, 0, 1);
            displayCart();
        });

        $("#show-cart").on("change", ".item-count", function(event){
            var name = $(this).attr("data-name");
            var count = Number($(this).val());
            shoppingCart.setCountForItem(name, count);
            displayCart();
        });


        displayCart();
</script>

<footer>
    <p>
        Tout droits réservés-2019-2020 Orinoco
    </p>
    <p>
        Réalisé par OrinocoSociaty
    </p>
</footer>


</body>
</html>